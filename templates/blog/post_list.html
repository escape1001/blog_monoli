{% extends "base/base.html" %}
{% load blog_tags %}
{% block content %}
<main class="center-content">
    <form>
        <input name="q" placeholder="검색어를 입력하세요" value="{{ request.GET.q }}"/>
        <ul>
            {% for tag in tags %}
            <li>
                <label for="{{tag.name}}">{{tag.name}}</label>
                <input
                    name="tag"
                    type="checkbox"
                    value="{{tag.name}}"
                    {% parse_tag_list request as tag_list %}
                    {% if tag.name in tag_list %}checked{% endif %}
                >
            </li>
            {% endfor %}
        </ul>
        <button>검색</button>
    </form>
    <section>
        {% if request.GET %}
        <h2 class="section-title">검색 결과</h2>
        {% else %}
        <h2 class="section-title">이런 글은 어떠세요?</h2>
        {% endif %}
        <ul class="post-list">
            {% for post in post_list %}
            <li class="box4">
                <a href="{% url "post_detail" post.pk %}">
                    {% if post.thumbnail_image %}
                    <img src="{{post.thumbnail_image.url}}" alt="">
                    {% endif %}
                    <div class="content-box">
                        <p class="title">{{post.title}}</p>
                        <ul class="tag-list">
                            {% for tag in post.tags.all %}
                            <li>{{tag.name}}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="info-box">
                        <p>by. {{post.author}}</p>
                        <p>{{post.created_at|date:"Y-m-d"}}</p>
                    </div>
                </a>
            </li>
            {% endfor %}
        </ul>
    </section>
</main>
{% endblock %}